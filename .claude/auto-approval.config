# Claude Code Auto-Approval Configuration
# This file defines patterns for automatic approval of certain operations

## Auto-Approved Bash Commands
# These commands will run without prompting for approval
AUTO_APPROVE_BASH_PATTERNS:
  - "npm test*"
  - "npm run*"
  - "git status"
  - "git diff*"
  - "git log*"
  - "git branch*"
  - "git checkout*"
  - "ls*"
  - "cat*"
  - "grep*"
  - "rg*"  # ripgrep
  - "find*"
  - "pwd"
  - "echo*"
  - "cd*"
  - "mkdir*"
  - "touch*"
  - "cp*"
  - "mv*"
  - "head*"
  - "tail*"
  - "wc*"
  - "sort*"
  - "uniq*"
  - "awk*"
  - "sed*"
  - "node scripts/apply-migration.js*"
  - "bash scripts/apply-migration-pooler.sh*"
  - "PGPASSWORD=* psql -h aws-1-us-east-2.pooler.supabase.com -p 5432*"
  - "node agents/*"
  - "node utils/*"
  - "npx*"
  - "yarn*"
  - "pnpm*"

## Auto-Approved File Operations
# These file patterns will be auto-approved for read/write
AUTO_APPROVE_FILE_PATTERNS:
  - "briefs/**/*.md"
  - "specs/**/*.md"
  - "tests/**/*.test.ts"
  - "tests/**/*.spec.ts"
  - "/tmp/dev-framework/debate/**"
  - "docs/consensus/**"
  - "supabase/migrations/*.sql"
  - "src/**/*.tsx"  # React components
  - "src/**/*.ts"   # TypeScript files
  - "src/**/*.css"  # Styles
  - "*.json"        # Config files
  - "*.md"          # Documentation
  - ".env.local"    # Local env (be careful)
  - "public/**/*"   # Public assets

## Operations That Still Require Approval
ALWAYS_REQUIRE_APPROVAL:
  - "rm -rf /"
  - "sudo*"
  - "curl*" # Security: External requests
  - "wget*"
  - ".env" # Security: Credentials
  - "**/*password*"
  - "**/*secret*"
  - "**/*key*"
  - "npx supabase db push" # FORBIDDEN: Always fails in WSL2
  - "psql*-p 6543*" # FORBIDDEN: Direct connection port fails
  - "supabase migration up" # FORBIDDEN: IPv6 issues

## Auto-Approved Tools
# These tools will run without prompting for approval
AUTO_APPROVE_TOOLS:
  - "SlashCommand"  # CRITICAL: Enable proactive workflows
  - "Task"
  - "Grep"
  - "Glob"
  - "Read"

## Workflow Automation Settings
WORKFLOW_AUTOMATION:
  auto_fix_codex_issues: true
  auto_continue_on_success: true
  auto_cleanup_debates: true
  max_autonomous_iterations: 10
  require_human_for_directional_changes: false  # Changed for smoother flow
  skip_tdd_for_simple_tasks: true  # NEW: Bypass TDD for 1-3 file changes
  simple_task_threshold: 3  # Files or less = simple
  enable_parallel_execution: true  # NEW: Allow parallel tool calls
  auto_approve_slash_commands: true  # NEW: Auto-approve all slash commands

## Agent Collaboration Settings
AGENT_COLLABORATION:
  auto_invoke_codex: true
  auto_resolve_fixable_issues: true
  auto_generate_tests: true
  auto_run_tests: true
  auto_commit_on_success: false # Still require explicit commit request